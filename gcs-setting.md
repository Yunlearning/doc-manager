申請與設定 Google Cloud Storage (GCS) 的流程非常直覺，主要可以分為**帳號申請**、**專案建立**與 **Bucket（儲存桶）設定**三個階段。

以下是針對 2026 年最新流程整理的詳細步驟指南：

---

## 第一階段：申請帳號與啟用計費

在使用任何 Google Cloud 服務前，你需要先擁有一個 Google 帳號並啟用 Cloud Console 權限。

1. **進入控制台**：訪問 [Google Cloud Console](https://console.cloud.google.com/)。
2. **登入與註冊**：使用你的 Google 帳號登入。如果是新用戶，Google 通常會提供 **300 美元的免費試用抵扣額**（有效期通常為 90 天）。
3. **設定計費帳戶 (Billing)**：
* 在左側選單中點選「**結算 (Billing)**」。
* 點選「**關聯計費帳戶**」並填寫信用卡資訊。


> **小撇步**：Google Cloud 的「始終免費 (Always Free)」方案包含 5GB 的標準儲存空間，適合個人小型專案。



---

## 第二階段：建立雲端專案

Google Cloud 的資源是以「專案」為單位進行管理的。

1. 點選頁面頂部的專案選單（通常顯示為「選取專案」或現有專案名稱）。
2. 點選右上方「**新增專案**」。
3. 輸入**專案名稱**（例如：`my-storage-project`），點選「建立」。

---

## 第三階段：建立與設定儲存桶 (Bucket)

儲存桶是存放資料的基本容器。

1. **進入 GCS 頁面**：在導覽選單中搜尋或點選「**Cloud Storage**」 > 「**值區 (Buckets)**」。
2. **點選「建立」**：
3. **設定關鍵選項**：
* **命名儲存桶**：必須是全球唯一的名稱。
* **位置類型**：
* **Region**：單一區域，延遲最低（適合運算任務）。
* **Multi-region**：跨區域備援，可用性最高（適合網站靜態資源）。


* **儲存空間類別 (Storage Class)**：
* **Standard**：適合頻繁存取的資料。
* **Nearline / Coldline / Archive**：適合備份，存放時間越長越便宜，但提取費用較高。


* **存取控制 (Access Control)**：
* 建議選擇「**統一 (Uniform)**」，透過 IAM 權限一次管理整個 Bucket 的存取。





---

## 第四階段：上傳與權限管理

建立完成後，你就可以開始管理檔案。

* **上傳檔案**：直接將檔案拖曳進瀏覽器介面，或點選「上傳檔案」。
* **權限設定 (IAM)**：
* 若要讓特定對象存取，點選「**權限**」分頁。
* 點選「**授予存取權**」，輸入電子郵件並分配角色（如：`Storage Object Viewer`）。


* **公開分享**：若要作為公開圖片床或下載連結，需取消勾選「**禁止公開存取**」並在權限中新增 `allUsers` 角色。

---

### 常見設定建議表

| 設定項目 | 建議選項 | 適用情境 |
| --- | --- | --- |
| **位置** | `asia-east1` (台灣) | 台灣用戶存取速度最快 |
| **類別** | `Standard` | 網站圖片、影音、日常作業檔案 |
| **安全性** | 啟用「**防護鎖定 (Retention Policy)**」 | 防止檔案被意外刪除或覆寫 |

**你想先嘗試建立一個測試用的儲存桶，還是需要我教你如何透過程式碼（例如 Python 或 Node.js）自動上傳檔案？**

要讓你的 Web App 成功連接到 Google Cloud Storage (GCS)，你需要從 Google Cloud Console 取得這三項關鍵資訊。以下是取得步驟：

### 1. 取得 `GCS_PROJECT_ID` (專案 ID)

這是你在 Google Cloud 上建立的專案唯一辨識碼。

* **步驟**：
1. 登入 [Google Cloud Console](https://console.cloud.google.com/)。
2. 在頁面最頂端的藍色列，點擊專案選取器（目前的專案名稱）。
3. 在彈出的視窗中，你會看到「**識別碼 (ID)**」這一欄。
4. 複製該字串（例如：`my-awesome-app-123456`），這就是你的 `GCS_PROJECT_ID`。



---

### 2. 取得 `GCS_BUCKET` (儲存桶名稱)

這是你存放檔案的容器名稱。

* **步驟**：
1. 在左側選單中，導航至 **Cloud Storage** > **值區 (Buckets)**。
2. 如果你還沒有儲存桶，點擊「**建立**」並按照指示設定（名稱必須是全球唯一的）。
3. 列表中的「**名稱**」欄位即為你的 `GCS_BUCKET`。



---

### 3. 取得 `GCS_KEYFILE` (服務帳戶金鑰)

這是最關鍵的一步，你的 Web App 需要這個 JSON 檔案來獲得存取 GCS 的權限。

* **步驟**：
1. 導航至 **IAM 與管理 (IAM & Admin)** > **服務帳戶 (Service Accounts)**。
2. 點擊上方的「**建立服務帳戶**」。
3. 設定帳戶名稱（例如：`web-app-storage-user`），然後點擊「建立並繼續」。
4. **授予角色 (重要)**：在「選取角色」中搜尋並選擇 **「Storage Object Admin」** (儲存庫物件管理員) 或 **「Storage Object Creator」**，這樣 App 才有權限讀寫檔案。
5. 完成建立後，在服務帳戶列表中點擊該帳戶的 **電子郵件地址**。
6. 切換到「**金鑰 (Keys)**」頁籤。
7. 點擊「**新增金鑰**」 > 「**建立新金鑰**」。
8. 選擇 **JSON** 格式並點擊「建立」。
9. **下載檔案**：這會下載一個 `.json` 檔案。


* **如何設定**：
* 通常你會將這個 JSON 檔案放在專案目錄中（**切記不要上傳到 GitHub 公開倉庫**）。
* 在環境變數中，`GCS_KEYFILE` 通常填入該檔案的**絕對路徑**（例如：`/app/config/gcs-key.json`），或者是直接將該 JSON 的內容貼進去（視你的 App 框架如何讀取而定）。



---

### 總結設定範例

你的環境變數文件 (`.env`) 看起來會像這樣：

```env
STORAGE_PROVIDER=gcs
GCS_PROJECT_ID=my-project-12345
GCS_BUCKET=my-app-uploads
GCS_KEYFILE=./config/google-service-account.json

```

**安全提醒：**

* **`.json` 金鑰檔案等同於你的密碼**。如果不小心外流，任何人都能存取或刪除你的雲端資料。請務必將其加入 `.gitignore` 中。
* 如果你的 App 部署在 Google Cloud 本身（如 App Engine 或 Cloud Run），通常不需要設定 `GCS_KEYFILE`，系統會自動使用內建的服務帳戶。

Google Cloud Storage (GCS) 的付費機制並非「上傳一個檔案收多少錢」這麼簡單，它是根據**使用量（Pay-as-you-go）**來計費的。

簡單來說，你的帳單是由 **「存了多少、存多久、做了什麼動作、傳了多少資料」** 這四個維度組成的。

---

## 1. GCS 的四大計費維度

### A. 儲存空間費 (Storage)

這是最基本的費用，根據你檔案佔用的 **GB 數**與**存放時間**計算。

* 不同的「儲存分級（Storage Class）」價格不同。
* **Standard (標準)**：最貴，但存取速度快，適合頻繁使用的資料。
* **Archive (歸檔)**：最便宜，但檔案必須存放至少 365 天，否則會有提前刪除費。

### B. 操作費用 (Operations) —— 這是你最關心的「上傳」部分

GCS 會根據你對檔案執行的「動作」次數收費，分為兩類：

* **Class A 操作（較貴）**：包含 **上傳 (Insert)**、更新、列出檔案。
* **Class B 操作（較便宜）**：包含 **讀取 (Get)**、查看中繼資料。

> **回答你的問題：** 是的，**「上傳一個檔案」會算作一次 Class A 操作**。但費用極低，通常每 10,000 次操作才收約 $0.05 ~ $0.10 美元（約台幣 1.5 ~ 3 元）。除非你的 App 每秒鐘都在上傳數萬個小檔案，否則這部分費用通常很有感。

### C. 網路傳輸費 (Network Egress)

* **上傳 (Ingress)**：**免費**。將檔案從你的電腦傳到 Google 雲端是不收網路費的。
* **下載 (Egress)**：**要錢**。當使用者從你的 Web App 下載檔案，或檔案傳輸到 Google 以外的網路時，會按 GB 計費。

### D. 資料擷取費 (Retrieval)

如果你使用的是 Nearline、Coldline 或 Archive 等後端儲存等級，當你想要「讀取」這些檔案時，除了操作費，還要額外收一筆擷取費。

---

## 2. 存檔等級與費用對比 (參考價)

| 項目 | Standard (標準) | Nearline (低頻) | Coldline (冷儲存) | Archive (歸檔) |
| --- | --- | --- | --- | --- |
| **建議用途** | 網頁圖片、影音串流 | 每月存取一次的備份 | 每年存取一次的資料 | 多年存取的法律存檔 |
| **儲存費 (每月/GB)** | 約 $0.02 USD | 約 $0.01 USD | 約 $0.004 USD | 約 $0.0012 USD |
| **最少存放期限** | 無 | 30 天 | 90 天 | 365 天 |
| **上傳/讀取費** | 最低 | 中 | 高 | 最高 |

---

## 3. 免費額度 (Always Free)

Google 提供了一個非常慷慨的免費額度，只要在指定的美國區域（如 `us-east1`），每個月可以享有：

* **5 GB** 的標準儲存空間。
* **5,000 次** Class A 操作（上傳）。
* **50,000 次** Class B 操作（讀取）。
* **1 GB** 的網路傳出量。

> **總結：**
> 如果你的 Web App 規模不大，且檔案總量在 5GB 以內，且使用者不多，你可能**完全不需要付費**。即便超過了，上傳一個檔案的「操作費」也是微乎其微，主要的成本通常來自於「總儲存容量」與「使用者下載產生的流量」。

**你的 Web App 預計會處理很多大檔案（如影片），還是大量的小檔案（如頭像）？我可以幫你估算哪種儲存分級最省錢。**